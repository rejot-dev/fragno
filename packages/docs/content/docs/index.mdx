---
title: What is Fragno?
description: Understanding Fragno, as a user or library author.
---

import { Step, Steps } from "fumadocs-ui/components/steps";
import { Card, Cards } from "fumadocs-ui/components/card";
import { Callout } from "fumadocs-ui/components/callout";

# What is Fragno?

Fragno is the <u>fr</u>amework-<u>agno</u>stic toolkit for building full-stack TypeScript libraries
that work seamlessly across different frameworks such as Next.js and Nuxt. Your users will integrate
in a couple lines of code. Write your API once, get type-safe clients for React, Vue, and vanilla
JavaScript automatically.

A library built with Fragno is called a **Fragment**.

## Fragments

A **Fragment** is a full-stack library that:

- Contains both server-side API logic and client-side integration code
- Works across multiple frameworks (React, Vue, Next.js, Nuxt, etc.)
- Provides end-to-end type safety

Fragments enabled the Fragment-author to write API routes as a library, that will be **embedded**
into the user's project. Fragno also provides a method for the Fragment-author to create a
client-side integration that's automatically reactive. Fragno's main goal is to make integrating
into a user's project as simple as possible.

**This differs from traditional libraries** in the sense that a library would usually be imported
either on the server or client side, and the user would be responsible for the glue-code.

## Installing a Fragment as a User

This documentation is split up into two parts, one for **users** and one for **library authors**.

These are usage instructions for integrating a Fragment, `example-fragment`, into a project as a
user.

<Steps>

<Step>
### Installation

Install the fragment you want to use:

```npm
npm i @fragno-dev/example-fragment
```

</Step>

<Step>
### Create an instance of the Fragment
Create an instance of the Fragment, somewhere central in your codebase:

This is the place where the Fragment is configured by passing Fragment-specific config fields such
as API keys, but also callback methods.

```ts title="lib/example-fragment-server.ts"
import { createExampleFragment } from "@fragno-dev/example-fragment";

export function createExampleFragmentInstance() {
  return createExampleFragment({
    // Pass any Fragment-specific config fields
    someApiKey: process.env.EXAMPLE_API_KEY!,
  });
}
```

</Step>

<Step>
### Mount the API routes
The API routes defined in the Fragment should be accessible from your frontend. We do this by
creating a "catch-all" API route that will (in this case) forward all requests starting with
`/api/example-fragment` to the Fragment.

Since most frameworks use file-based routing, the location of this file is important.

```ts title="app/api/example-fragment/[...all]/route.ts" tab="Next.js"
import { toNextJsHandler } from "@fragno-dev/core/next-js";
import { createExampleFragmentInstance } from "@/lib/example-fragment-server";

export const { GET, POST, PUT, PATCH, DELETE } = toNextJsHandler(createExampleFragmentInstance());
```

```ts title="server/api/example-fragment/[...all].ts" tab="Nuxt"
import { createExampleFragmentInstance } from "@/lib/example-fragment-server";

export default fromWebHandler(exampleFragment.handler);
```

```ts title="app/routes/api/example-fragment.tsx" tab="React Router v7"
import type { Route } from "./+types/example-fragment";
import { createExampleFragmentInstance } from "@/lib/example-fragment-server";

export async function loader({ request }: Route.LoaderArgs) {
  return await createExampleFragmentInstance().handler(request);
}

export async function action({ request }: Route.ActionArgs) {
  return await createExampleFragmentInstance().handler(request);
}
```

```ts title="pages/api/example-fragment/[...all].ts" tab="Astro"
import { createExampleFragmentInstance } from "@/lib/example-fragment-server";
import { toAstroHandler } from "@fragno-dev/core/astro";

export const { ALL } = toAstroHandler(createExampleFragmentInstance().handler);
export const prerender = false;
```

```ts title="index.ts", tab="Hono"
import { Hono } from "hono";
import { createExampleFragmentInstance } from "@/lib/example-fragment-server";

const app = new Hono();
app.all("/api/example-fragment/*", (c) => createExampleFragmentInstance().handler(c.req.raw));
```

```ts title="index.ts", tab="Express"
import express from "express";
import { createExampleFragmentInstance } from "@/lib/example-fragment-server";

// NOTE: `toNodeHandler` is defined in a separate npm package. Make sure to install it.
import { toNodeHandler } from "@fragno-dev/node";

const app = express();
app.all("/api/my-library/{*any}", toNodeHandler(createExampleFragmentInstance().handler));

// WARNING! If you're using the Express json middleware, make sure that it's mounted AFTER the
// Fragment handler.
app.use(express.json());
```

```ts title="index.ts" tab="Node.js"
import { createServer } from "node:http";
import { createExampleFragmentInstance } from "@/lib/example-fragment-server";
import { toNodeHandler } from "@fragno-dev/node";

const server = createServer((req, res) => {
  const exampleFragment = createExampleFragmentInstance();

  if (req.url?.startsWith(exampleFragment.mountRoute)) {
    const handler = toNodeHandler(exampleFragment.handler);
    return handler(req, res);
  }

  // ... Your route handling
});
```

<Callout type="info">
  Fragno uses the web standard `Request` and `Response` objects, so frameworks not listed here will
  integrate in a very similar manner. The `handler` function on a Fragment instance takes a request
  and returns a response.
</Callout>

</Step>

<Step>
### Create a client-side integration

Again in a central place, but now for the client-side integration:

```ts title="lib/example-fragment-client.ts" tab="React"
import { createExampleFragmentClient } from "@fragno-dev/example-fragment";
import { useFragno } from "@fragno-dev/core/react";

const exampleFragmentClient = createExampleFragmentClient();
export const exampleFragment = useFragno(exampleFragmentClient);
```

```ts title="lib/example-fragment-client.ts" tab="Vue"
import { createExampleFragmentClient } from "@fragno-dev/example-fragment";
import { useFragno } from "@fragno-dev/core/vue";

const exampleFragmentClient = createExampleFragmentClient();
export const exampleFragment = useFragno(exampleFragmentClient);
```

```ts title="lib/example-fragment-client.ts" tab="Vanilla JavaScript"
import { createExampleFragmentClient } from "@fragno-dev/example-fragment";
import { useFragno } from "@fragno-dev/core/vanilla";

const exampleFragmentClient = createExampleFragmentClient();
export const exampleFragment = useFragno(exampleFragmentClient);
```

<Callout type="info">
  You're free to mount the backend routes on a different route. In that case it's important to pass
  the `mountRoute` option to the client-side integration.
</Callout>

</Step>

<Step>
### Client-side usage

You can now use the Fragment in any of your components:

```ts title="components/ExampleComponent.tsx" tab="React"
import { exampleFragment } from "@/lib/example-fragment-client";

export default function ExampleComponent() {
  const { data, loading } = exampleFragment.useData();

  return (
    <div>
      <h1>Example Component</h1>
      {loading ? <div>Loading...</div> : <div>{data}</div>}
    </div>
  );
}
```

```vue title="components/ExampleComponent.vue" tab="Vue"
<template>
  <div>
    <div v-if="loading">Loading...</div>
    <div v-else>{{ data }}</div>
  </div>
</template>

<script setup lang="ts">
import { exampleFragment } from "@/lib/example-fragment-client";

const { data, loading } = exampleFragment.useData();
</script>
```

```ts title="main.ts" tab="Vanilla JavaScript"
import { exampleFragment } from "@/lib/example-fragment-client";

exampleFragment.useData().subscribe(({ data, loading }) => {
  const dataDisplay = document.getElementById("data-display")!;
  dataDisplay.textContent = loading ? "loading..." : data;
});
```

</Step>

</Steps>

## As a Library (Fragment) Author

Continue to the [For Library Authors](./docs/for-library-authors/getting-started) section to learn
how to build your own Fragno fragments.

## What's Next?

<Cards>
  <Card
    title="For Users"
    href="/docs/for-users/integrating-a-fragment"
    description="Learn how to integrate Fragments into your project"
  />
  <Card
    title="For Library Authors"
    href="/docs/for-library-authors/getting-started"
    description="Learn how to build your own Fragments"
  />
</Cards>
