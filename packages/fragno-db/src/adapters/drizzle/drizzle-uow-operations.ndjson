{"operation":{"type":"find","schema":"[Schema]","table":"[Table:users]","indexName":"idx_email","options":{"useIndex":"idx_email","where":"[Function]"}},"compiledSql":{"sql":"select \"id\", \"name\", \"email\", \"age\", \"_internalId\", \"_version\" from \"users\" \"users\" where \"users\".\"email\" = ?","params":["test@example.com"]}}
{"operation":{"type":"find","schema":"[Schema]","table":"[Table:users]","indexName":"idx_name","options":{"useIndex":"idx_name","select":["id","name"],"where":"[Function]"}},"compiledSql":{"sql":"select \"id\", \"name\", \"_internalId\", \"_version\" from \"users\" \"users\" where \"users\".\"name\" = ?","params":["Alice"]}}
{"operation":{"type":"find","schema":"[Schema]","table":"[Table:users]","indexName":"_primary","options":{"useIndex":"_primary","pageSize":10}},"compiledSql":{"sql":"select \"id\", \"name\", \"email\", \"age\", \"_internalId\", \"_version\" from \"users\" \"users\" limit ?","params":[10]}}
{"operation":{"type":"find","schema":"[Schema]","table":"[Table:users]","indexName":"_primary","options":{"useIndex":"_primary","orderByIndex":{"indexName":"_primary","direction":"desc"}}},"compiledSql":{"sql":"select \"id\", \"name\", \"email\", \"age\", \"_internalId\", \"_version\" from \"users\" \"users\" order by \"users\".\"id\" desc","params":[]}}
{"operation":{"type":"find","schema":"[Schema]","table":"[Table:users]","indexName":"idx_name","options":{"useIndex":"idx_name","orderByIndex":{"indexName":"idx_name","direction":"desc"}}},"compiledSql":{"sql":"select \"id\", \"name\", \"email\", \"age\", \"_internalId\", \"_version\" from \"users\" \"users\" order by \"users\".\"name\" desc","params":[]}}
{"operation":{"type":"find","schema":"[Schema]","table":"[Table:users]","indexName":"idx_email","options":{"useIndex":"idx_email","where":"[Function]"}},"compiledSql":{"sql":"select \"id\", \"name\", \"email\", \"age\", \"_internalId\", \"_version\" from \"users\" \"users\" where \"users\".\"email\" = ?","params":["user1@example.com"]}}
{"operation":{"type":"find","schema":"[Schema]","table":"[Table:posts]","indexName":"idx_title","options":{"useIndex":"idx_title","where":"[Function]"}},"compiledSql":{"sql":"select \"id\", \"title\", \"content\", \"userId\", \"viewCount\", \"_internalId\", \"_version\" from \"posts\" \"posts\" where \"posts\".\"title\" like ?","params":["%test%"]}}
{"operation":{"type":"count","schema":"[Schema]","table":"[Table:users]","indexName":"_primary","options":{"useIndex":"_primary"}},"compiledSql":{"sql":"select count(*) from \"users\"","params":[]}}
{"operation":{"type":"count","schema":"[Schema]","table":"[Table:users]","indexName":"idx_name","options":{"useIndex":"idx_name","where":"[Function]"}},"compiledSql":{"sql":"select count(*) from \"users\" where \"users\".\"name\" like ?","params":["John%"]}}
{"operation":{"type":"find","schema":"[Schema]","table":"[Table:users]","indexName":"idx_name","options":{"useIndex":"idx_name","orderByIndex":{"indexName":"idx_name","direction":"asc"},"after":"eyJ2IjoxLCJpbmRleE5hbWUiOiJpZHhfbmFtZSIsIm9yZGVyRGlyZWN0aW9uIjoiYXNjIiwicGFnZVNpemUiOjEwLCJpbmRleFZhbHVlcyI6eyJuYW1lIjoiQWxpY2UifX0=","pageSize":10}},"compiledSql":{"sql":"select \"id\", \"name\", \"email\", \"age\", \"_internalId\", \"_version\" from \"users\" \"users\" where \"users\".\"name\" > ? order by \"users\".\"name\" asc limit ?","params":["Alice",10]}}
{"operation":{"type":"find","schema":"[Schema]","table":"[Table:users]","indexName":"idx_name","options":{"useIndex":"idx_name","orderByIndex":{"indexName":"idx_name","direction":"desc"},"before":"eyJ2IjoxLCJpbmRleE5hbWUiOiJpZHhfbmFtZSIsIm9yZGVyRGlyZWN0aW9uIjoiZGVzYyIsInBhZ2VTaXplIjoxMCwiaW5kZXhWYWx1ZXMiOnsibmFtZSI6IkJvYiJ9fQ==","pageSize":10}},"compiledSql":{"sql":"select \"id\", \"name\", \"email\", \"age\", \"_internalId\", \"_version\" from \"users\" \"users\" where \"users\".\"name\" > ? order by \"users\".\"name\" desc limit ?","params":["Bob",10]}}
{"operation":{"type":"find","schema":"[Schema]","table":"[Table:users]","indexName":"idx_name","options":{"useIndex":"idx_name","where":"[Function]","orderByIndex":{"indexName":"idx_name","direction":"asc"},"after":"eyJ2IjoxLCJpbmRleE5hbWUiOiJpZHhfbmFtZSIsIm9yZGVyRGlyZWN0aW9uIjoiYXNjIiwicGFnZVNpemUiOjUsImluZGV4VmFsdWVzIjp7Im5hbWUiOiJBbGljZSJ9fQ==","pageSize":5}},"compiledSql":{"sql":"select \"id\", \"name\", \"email\", \"age\", \"_internalId\", \"_version\" from \"users\" \"users\" where (\"users\".\"name\" like ? and \"users\".\"name\" > ?) order by \"users\".\"name\" asc limit ?","params":["John%","Alice",5]}}
{"operation":{"type":"find","schema":"[Schema]","table":"[Table:posts]","indexName":"idx_title","options":{"useIndex":"idx_title","where":"[Function]","joins":[{"relation":{"id":"posts_users","on":[["userId","id"]],"name":"author","referencer":{"name":"posts","ormName":"posts","columns":{"id":"[IdColumn]","title":"[Column]","content":"[Column]","userId":"[Column]","viewCount":"[Column]","_internalId":"[InternalIdColumn]","_version":"[VersionColumn]"},"relations":{"author":"[Circular]"},"indexes":{"idx_user":{"name":"idx_user","columns":["[Circular]"],"columnNames":["userId"],"unique":false},"idx_title":{"name":"idx_title","columns":["[Circular]"],"columnNames":["title"],"unique":false}},"getColumnByName":"[Function]","getIdColumn":"[Function]","getInternalIdColumn":"[Function]","getVersionColumn":"[Function]"},"table":{"name":"users","ormName":"users","columns":{"id":"[IdColumn]","name":"[Column]","email":"[Column]","age":"[Column]","_internalId":"[InternalIdColumn]","_version":"[VersionColumn]"},"relations":{},"indexes":{"idx_email":{"name":"idx_email","columns":["[Circular]"],"columnNames":["email"],"unique":true},"idx_name":{"name":"idx_name","columns":["[Circular]"],"columnNames":["name"],"unique":false}},"getColumnByName":"[Function]","getIdColumn":"[Function]","getInternalIdColumn":"[Function]","getVersionColumn":"[Function]"},"type":"one"},"options":{"select":true}}]}},"compiledSql":{"sql":"select \"id\", \"title\", \"content\", \"userId\", \"viewCount\", \"_internalId\", \"_version\", (select json_array(\"id\", \"name\", \"email\", \"age\", \"_internalId\", \"_version\") as \"data\" from (select * from \"users\" \"posts_author\" where \"posts_author\".\"_internalId\" = \"posts\".\"userId\" limit ?) \"posts_author\") as \"author\" from \"posts\" \"posts\" where \"posts\".\"title\" like ?","params":[1,"%test%"]}}
{"operation":{"type":"find","schema":"[Schema]","table":"[Table:posts]","indexName":"_primary","options":{"useIndex":"_primary","joins":[{"relation":{"id":"posts_users","on":[["userId","id"]],"name":"author","referencer":{"name":"posts","ormName":"posts","columns":{"id":"[IdColumn]","title":"[Column]","content":"[Column]","userId":"[Column]","viewCount":"[Column]","_internalId":"[InternalIdColumn]","_version":"[VersionColumn]"},"relations":{"author":"[Circular]"},"indexes":{"idx_user":{"name":"idx_user","columns":["[Circular]"],"columnNames":["userId"],"unique":false},"idx_title":{"name":"idx_title","columns":["[Circular]"],"columnNames":["title"],"unique":false}},"getColumnByName":"[Function]","getIdColumn":"[Function]","getInternalIdColumn":"[Function]","getVersionColumn":"[Function]"},"table":{"name":"users","ormName":"users","columns":{"id":"[IdColumn]","name":"[Column]","email":"[Column]","age":"[Column]","_internalId":"[InternalIdColumn]","_version":"[VersionColumn]"},"relations":{},"indexes":{"idx_email":{"name":"idx_email","columns":["[Circular]"],"columnNames":["email"],"unique":true},"idx_name":{"name":"idx_name","columns":["[Circular]"],"columnNames":["name"],"unique":false}},"getColumnByName":"[Function]","getIdColumn":"[Function]","getInternalIdColumn":"[Function]","getVersionColumn":"[Function]"},"type":"one"},"options":{"select":["name"],"where":{"type":"compare","a":"[Circular]","b":"Alice","operator":"="}}}]}},"compiledSql":{"sql":"select \"id\", \"title\", \"content\", \"userId\", \"viewCount\", \"_internalId\", \"_version\", (select json_array(\"name\", \"_internalId\", \"_version\") as \"data\" from (select * from \"users\" \"posts_author\" where (\"posts_author\".\"_internalId\" = \"posts\".\"userId\" and \"posts_author\".\"name\" = ?) limit ?) \"posts_author\") as \"author\" from \"posts\" \"posts\"","params":["Alice",1]}}
{"operation":{"type":"find","schema":"[Schema]","table":"[Table:posts]","indexName":"_primary","options":{"useIndex":"_primary","joins":[{"relation":{"id":"posts_users","on":[["userId","id"]],"name":"author","referencer":{"name":"posts","ormName":"posts","columns":{"id":"[IdColumn]","title":"[Column]","content":"[Column]","userId":"[Column]","viewCount":"[Column]","_internalId":"[InternalIdColumn]","_version":"[VersionColumn]"},"relations":{"author":"[Circular]"},"indexes":{"idx_user":{"name":"idx_user","columns":["[Circular]"],"columnNames":["userId"],"unique":false},"idx_title":{"name":"idx_title","columns":["[Circular]"],"columnNames":["title"],"unique":false}},"getColumnByName":"[Function]","getIdColumn":"[Function]","getInternalIdColumn":"[Function]","getVersionColumn":"[Function]"},"table":{"name":"users","ormName":"users","columns":{"id":"[IdColumn]","name":"[Column]","email":"[Column]","age":"[Column]","_internalId":"[InternalIdColumn]","_version":"[VersionColumn]"},"relations":{},"indexes":{"idx_email":{"name":"idx_email","columns":["[Circular]"],"columnNames":["email"],"unique":true},"idx_name":{"name":"idx_name","columns":["[Circular]"],"columnNames":["name"],"unique":false}},"getColumnByName":"[Function]","getIdColumn":"[Function]","getInternalIdColumn":"[Function]","getVersionColumn":"[Function]"},"type":"one"},"options":{"select":true,"orderBy":[["[Circular]","desc"]]}}]}},"compiledSql":{"sql":"select \"id\", \"title\", \"content\", \"userId\", \"viewCount\", \"_internalId\", \"_version\", (select json_array(\"id\", \"name\", \"email\", \"age\", \"_internalId\", \"_version\") as \"data\" from (select * from \"users\" \"posts_author\" where \"posts_author\".\"_internalId\" = \"posts\".\"userId\" order by \"posts_author\".\"name\" desc limit ?) \"posts_author\") as \"author\" from \"posts\" \"posts\"","params":[1]}}
{"operation":{"type":"find","schema":"[Schema]","table":"[Table:posts]","indexName":"_primary","options":{"useIndex":"_primary","joins":[{"relation":{"id":"posts_users","on":[["userId","id"]],"name":"author","referencer":{"name":"posts","ormName":"posts","columns":{"id":"[IdColumn]","title":"[Column]","content":"[Column]","userId":"[Column]","viewCount":"[Column]","_internalId":"[InternalIdColumn]","_version":"[VersionColumn]"},"relations":{"author":"[Circular]"},"indexes":{"idx_user":{"name":"idx_user","columns":["[Circular]"],"columnNames":["userId"],"unique":false},"idx_title":{"name":"idx_title","columns":["[Circular]"],"columnNames":["title"],"unique":false}},"getColumnByName":"[Function]","getIdColumn":"[Function]","getInternalIdColumn":"[Function]","getVersionColumn":"[Function]"},"table":{"name":"users","ormName":"users","columns":{"id":"[IdColumn]","name":"[Column]","email":"[Column]","age":"[Column]","_internalId":"[InternalIdColumn]","_version":"[VersionColumn]"},"relations":{},"indexes":{"idx_email":{"name":"idx_email","columns":["[Circular]"],"columnNames":["email"],"unique":true},"idx_name":{"name":"idx_name","columns":["[Circular]"],"columnNames":["name"],"unique":false}},"getColumnByName":"[Function]","getIdColumn":"[Function]","getInternalIdColumn":"[Function]","getVersionColumn":"[Function]"},"type":"one"},"options":{"select":true,"limit":5}}]}},"compiledSql":{"sql":"select \"id\", \"title\", \"content\", \"userId\", \"viewCount\", \"_internalId\", \"_version\", (select json_array(\"id\", \"name\", \"email\", \"age\", \"_internalId\", \"_version\") as \"data\" from (select * from \"users\" \"posts_author\" where \"posts_author\".\"_internalId\" = \"posts\".\"userId\" limit ?) \"posts_author\") as \"author\" from \"posts\" \"posts\"","params":[1]}}
{"operation":{"type":"create","schema":"[Schema]","table":"users","values":{"name":"John Doe","email":"john@example.com","age":30,"id":"cxyxtv0sxog50cpmt3pf1qwv"},"generatedExternalId":"cxyxtv0sxog50cpmt3pf1qwv"},"compiledSql":{"sql":"insert into \"users\" (\"id\", \"name\", \"email\", \"age\", \"_internalId\", \"_version\") values (?, ?, ?, ?, null, ?)","params":["cxyxtv0sxog50cpmt3pf1qwv","John Doe","john@example.com",30,0],"expectedAffectedRows":null,"expectedReturnedRows":null}}
{"operation":{"type":"create","schema":"[Schema]","table":"posts","values":{"title":"Test Post","content":"Post content","userId":"user_external_id_123","viewCount":5,"id":"oe7ir9w4c8d37z2dtxcdq4e1"},"generatedExternalId":"oe7ir9w4c8d37z2dtxcdq4e1"},"compiledSql":{"sql":"insert into \"posts\" (\"id\", \"title\", \"content\", \"userId\", \"viewCount\", \"_internalId\", \"_version\") values (?, ?, ?, (select \"_internalId\" from \"users\" where \"id\" = ? limit 1), ?, null, ?)","params":["oe7ir9w4c8d37z2dtxcdq4e1","Test Post","Post content","user_external_id_123",5,0],"expectedAffectedRows":null,"expectedReturnedRows":null}}
{"operation":{"type":"create","schema":"[Schema]","table":"posts","values":{"title":"Direct ID Post","content":"Content with direct bigint","userId":"12345n","id":"bax6wg174kuv26ikgxz0wntx"},"generatedExternalId":"bax6wg174kuv26ikgxz0wntx"},"compiledSql":{"sql":"insert into \"posts\" (\"id\", \"title\", \"content\", \"userId\", \"viewCount\", \"_internalId\", \"_version\") values (?, ?, ?, ?, ?, null, ?)","params":["bax6wg174kuv26ikgxz0wntx","Direct ID Post","Content with direct bigint","12345n",0,0],"expectedAffectedRows":null,"expectedReturnedRows":null}}
{"operation":{"type":"create","schema":"[Schema]","table":"posts","values":{"title":"Post with FragnoId","content":"Content","userId":{"externalId":"user_ext_789"},"id":"qbx2kky1oyu5rkrxgrbfahrt"},"generatedExternalId":"qbx2kky1oyu5rkrxgrbfahrt"},"compiledSql":{"sql":"insert into \"posts\" (\"id\", \"title\", \"content\", \"userId\", \"viewCount\", \"_internalId\", \"_version\") values (?, ?, ?, (select \"_internalId\" from \"users\" where \"id\" = ? limit 1), ?, null, ?)","params":["qbx2kky1oyu5rkrxgrbfahrt","Post with FragnoId","Content","user_ext_789",0,0],"expectedAffectedRows":null,"expectedReturnedRows":null}}
{"operation":{"type":"update","schema":"[Schema]","table":"posts","id":{"externalId":"post123"},"checkVersion":false,"set":{"userId":"new_user_external_id_456"}},"compiledSql":{"sql":"update \"posts\" set \"userId\" = (select \"_internalId\" from \"users\" where \"id\" = ? limit 1), \"_version\" = COALESCE(_version, 0) + 1 where \"posts\".\"id\" = ?","params":["new_user_external_id_456","post123"],"expectedAffectedRows":null,"expectedReturnedRows":null}}
{"operation":{"type":"update","schema":"[Schema]","table":"posts","id":{"externalId":"post456"},"checkVersion":false,"set":{"userId":"99999n"}},"compiledSql":{"sql":"update \"posts\" set \"userId\" = ?, \"_version\" = COALESCE(_version, 0) + 1 where \"posts\".\"id\" = ?","params":["99999n","post456"],"expectedAffectedRows":null,"expectedReturnedRows":null}}
{"operation":{"type":"update","schema":"[Schema]","table":"users","id":{"externalId":"user123"},"checkVersion":false,"set":{"name":"Jane Doe","age":25}},"compiledSql":{"sql":"update \"users\" set \"name\" = ?, \"age\" = ?, \"_version\" = COALESCE(_version, 0) + 1 where \"users\".\"id\" = ?","params":["Jane Doe",25,"user123"],"expectedAffectedRows":null,"expectedReturnedRows":null}}
{"operation":{"type":"update","schema":"[Schema]","table":"users","id":{"externalId":"user123"},"checkVersion":true,"set":{"age":18}},"compiledSql":{"sql":"update \"users\" set \"age\" = ?, \"_version\" = COALESCE(_version, 0) + 1 where (\"users\".\"id\" = ? and \"users\".\"_version\" = ?)","params":[18,"user123",5],"expectedAffectedRows":1,"expectedReturnedRows":null}}
{"operation":{"type":"delete","schema":"[Schema]","table":"users","id":{"externalId":"user123"},"checkVersion":false},"compiledSql":{"sql":"delete from \"users\" where \"users\".\"id\" = ?","params":["user123"],"expectedAffectedRows":null,"expectedReturnedRows":null}}
{"operation":{"type":"delete","schema":"[Schema]","table":"users","id":{"externalId":"user123"},"checkVersion":true},"compiledSql":{"sql":"delete from \"users\" where (\"users\".\"id\" = ? and \"users\".\"_version\" = ?)","params":["user123",3],"expectedAffectedRows":1,"expectedReturnedRows":null}}
{"operation":{"type":"update","schema":"[Schema]","table":"users","id":"user123","checkVersion":false,"set":{"name":"Jane Doe","age":25}},"compiledSql":{"sql":"update \"users\" set \"name\" = ?, \"age\" = ?, \"_version\" = COALESCE(_version, 0) + 1 where \"users\".\"id\" = ?","params":["Jane Doe",25,"user123"],"expectedAffectedRows":null,"expectedReturnedRows":null}}
{"operation":{"type":"delete","schema":"[Schema]","table":"users","id":"user123","checkVersion":false},"compiledSql":{"sql":"delete from \"users\" where \"users\".\"id\" = ?","params":["user123"],"expectedAffectedRows":null,"expectedReturnedRows":null}}
{"operation":{"type":"create","schema":"[Schema]","table":"users","values":{"name":"Alice","email":"alice@example.com","id":"clqkcobpqs6licybjn1aep8n"},"generatedExternalId":"clqkcobpqs6licybjn1aep8n"},"compiledSql":{"sql":"insert into \"users\" (\"id\", \"name\", \"email\", \"age\", \"_internalId\", \"_version\") values (?, ?, ?, null, null, ?)","params":["clqkcobpqs6licybjn1aep8n","Alice","alice@example.com",0],"expectedAffectedRows":null,"expectedReturnedRows":null}}
{"operation":{"type":"update","schema":"[Schema]","table":"posts","id":{"externalId":"post123"},"checkVersion":false,"set":{"viewCount":10}},"compiledSql":{"sql":"update \"posts\" set \"viewCount\" = ?, \"_version\" = COALESCE(_version, 0) + 1 where \"posts\".\"id\" = ?","params":[10,"post123"],"expectedAffectedRows":null,"expectedReturnedRows":null}}
{"operation":{"type":"delete","schema":"[Schema]","table":"posts","id":{"externalId":"user456"},"checkVersion":false},"compiledSql":{"sql":"delete from \"posts\" where \"posts\".\"id\" = ?","params":["user456"],"expectedAffectedRows":null,"expectedReturnedRows":null}}
{"operation":{"type":"find","schema":"[Schema]","table":"[Table:users]","indexName":"_primary","options":{"useIndex":"_primary","where":"[Function]"}},"compiledSql":{"sql":"select \"id\", \"name\", \"email\", \"age\", \"_internalId\", \"_version\" from \"users\" \"users\" where \"users\".\"id\" = ?","params":["user123"]}}
{"operation":{"type":"update","schema":"[Schema]","table":"users","id":{"externalId":"user123"},"checkVersion":true,"set":{"age":31}},"compiledSql":{"sql":"update \"users\" set \"age\" = ?, \"_version\" = COALESCE(_version, 0) + 1 where (\"users\".\"id\" = ? and \"users\".\"_version\" = ?)","params":[31,"user123",3],"expectedAffectedRows":1,"expectedReturnedRows":null}}
{"operation":{"type":"find","schema":"[Schema]","table":"[Table:users]","indexName":"idx_email","options":{"useIndex":"idx_email","where":"[Function]"}},"compiledSql":{"sql":"select \"id\", \"name\", \"email\", \"age\", \"_internalId\", \"_version\" from \"users\" \"users\" where (\"users\".\"email\" like ? and (\"users\".\"name\" = ? or \"users\".\"name\" = ?))","params":["%@example.com%","Alice","Bob"]}}
{"operation":{"type":"find","schema":"[Schema]","table":"[Table:users]","indexName":"_primary","options":{"useIndex":"_primary","where":"[Function]"}},"compiledSql":null}
{"operation":{"type":"find","schema":"[Schema]","table":"[Table:users]","indexName":"_primary","options":{"useIndex":"_primary","where":"[Function]"}},"compiledSql":{"sql":"select \"id\", \"name\", \"email\", \"age\", \"_internalId\", \"_version\" from \"users\" \"users\"","params":[]}}
{"operation":{"type":"update","schema":"[Schema]","table":"users","id":{"externalId":"user123"},"checkVersion":true,"set":{"age":31}},"compiledSql":{"sql":"update \"users\" set \"age\" = ?, \"_version\" = COALESCE(_version, 0) + 1 where (\"users\".\"id\" = ? and \"users\".\"_version\" = ?)","params":[31,"user123",5],"expectedAffectedRows":1,"expectedReturnedRows":null}}
{"operation":{"type":"delete","schema":"[Schema]","table":"users","id":{"externalId":"user456"},"checkVersion":true},"compiledSql":{"sql":"delete from \"users\" where (\"users\".\"id\" = ? and \"users\".\"_version\" = ?)","params":["user456",3],"expectedAffectedRows":1,"expectedReturnedRows":null}}
{"operation":{"type":"update","schema":"[Schema]","table":"users","id":{"externalId":"user1"},"checkVersion":true,"set":{"age":30}},"compiledSql":{"sql":"update \"users\" set \"age\" = ?, \"_version\" = COALESCE(_version, 0) + 1 where (\"users\".\"id\" = ? and \"users\".\"_version\" = ?)","params":[30,"user1",2],"expectedAffectedRows":1,"expectedReturnedRows":null}}
{"operation":{"type":"update","schema":"[Schema]","table":"posts","id":{"externalId":"post1"},"checkVersion":true,"set":{"viewCount":100}},"compiledSql":{"sql":"update \"posts\" set \"viewCount\" = ?, \"_version\" = COALESCE(_version, 0) + 1 where (\"posts\".\"id\" = ? and \"posts\".\"_version\" = ?)","params":[100,"post1",1],"expectedAffectedRows":1,"expectedReturnedRows":null}}
{"operation":{"type":"update","schema":"[Schema]","table":"users","id":{"externalId":"user1"},"checkVersion":false,"set":{"age":25}},"compiledSql":{"sql":"update \"users\" set \"age\" = ?, \"_version\" = COALESCE(_version, 0) + 1 where \"users\".\"id\" = ?","params":[25,"user1"],"expectedAffectedRows":null,"expectedReturnedRows":null}}
{"operation":{"type":"find","schema":"[Schema]","table":"[Table:users]","indexName":"_primary","options":{"useIndex":"_primary"}},"compiledSql":{"sql":"select \"id\", \"name\", \"email\", \"age\", \"_internalId\", \"_version\" from \"users\" \"users\"","params":[]}}
{"operation":{"type":"create","schema":"[Schema]","table":"users","values":{"name":"Test User","email":"test@example.com","id":"q3h06fzym53ack2y89vp8po4"},"generatedExternalId":"q3h06fzym53ack2y89vp8po4"},"compiledSql":{"sql":"insert into \"users\" (\"id\", \"name\", \"email\", \"age\", \"_internalId\", \"_version\") values (?, ?, ?, null, null, ?)","params":["q3h06fzym53ack2y89vp8po4","Test User","test@example.com",0],"expectedAffectedRows":null,"expectedReturnedRows":null}}
{"operation":{"type":"create","schema":"[Schema]","table":"logs","values":{"message":"Test log","id":"evw71rkx6r0d7ptb3n4cr46f"},"generatedExternalId":"evw71rkx6r0d7ptb3n4cr46f"},"compiledSql":{"sql":"insert into \"logs\" (\"id\", \"message\", \"sessionId\", \"timestamp\", \"counter\", \"status\", \"_internalId\", \"_version\") values (?, ?, ?, ?, ?, ?, null, ?)","params":["evw71rkx6r0d7ptb3n4cr46f","Test log","a946ff5cac3pqg9d4psyh33z",1763667697,42,"pending",0],"expectedAffectedRows":null,"expectedReturnedRows":null}}
{"operation":{"type":"create","schema":"[Schema]","table":"logs","values":{"message":"Test log","sessionId":"custom-session-id","timestamp":"2024-01-01T00:00:00.000Z","counter":100,"status":"active","id":"r5w0ouzy2oubxt1ljoch00w4"},"generatedExternalId":"r5w0ouzy2oubxt1ljoch00w4"},"compiledSql":{"sql":"insert into \"logs\" (\"id\", \"message\", \"sessionId\", \"timestamp\", \"counter\", \"status\", \"_internalId\", \"_version\") values (?, ?, ?, ?, ?, ?, null, ?)","params":["r5w0ouzy2oubxt1ljoch00w4","Test log","custom-session-id",1704067200,100,"active",0],"expectedAffectedRows":null,"expectedReturnedRows":null}}
{"operation":{"type":"create","schema":"[Schema]","table":"logs","values":{"message":"Partial log","counter":999,"id":"nq1atfh1cg3knsezneblwmq8"},"generatedExternalId":"nq1atfh1cg3knsezneblwmq8"},"compiledSql":{"sql":"insert into \"logs\" (\"id\", \"message\", \"sessionId\", \"timestamp\", \"counter\", \"status\", \"_internalId\", \"_version\") values (?, ?, ?, ?, ?, ?, null, ?)","params":["nq1atfh1cg3knsezneblwmq8","Partial log","ok4c6vykitteodj7c9ok5yl1",1763667697,999,"pending",0],"expectedAffectedRows":null,"expectedReturnedRows":null}}
{"operation":{"type":"create","schema":"[Schema]","table":"logs","values":{"message":"Log 1","id":"gu7jxl13bjbs5nltpcups6qv"},"generatedExternalId":"gu7jxl13bjbs5nltpcups6qv"},"compiledSql":{"sql":"insert into \"logs\" (\"id\", \"message\", \"sessionId\", \"timestamp\", \"counter\", \"status\", \"_internalId\", \"_version\") values (?, ?, ?, ?, ?, ?, null, ?)","params":["gu7jxl13bjbs5nltpcups6qv","Log 1","nljuom7ws1gbn9nkybpedj50",1763667697,42,"pending",0],"expectedAffectedRows":null,"expectedReturnedRows":null}}
{"operation":{"type":"create","schema":"[Schema]","table":"logs","values":{"message":"Log 2","id":"mn69mxjmzv6lw3207bns16b1"},"generatedExternalId":"mn69mxjmzv6lw3207bns16b1"},"compiledSql":{"sql":"insert into \"logs\" (\"id\", \"message\", \"sessionId\", \"timestamp\", \"counter\", \"status\", \"_internalId\", \"_version\") values (?, ?, ?, ?, ?, ?, null, ?)","params":["mn69mxjmzv6lw3207bns16b1","Log 2","k5jgmkklv72w9n0y9ph7wne3",1763667697,42,"pending",0],"expectedAffectedRows":null,"expectedReturnedRows":null}}
{"operation":{"type":"create","schema":"[Schema]","table":"logs","values":{"message":"Log 3","id":"e03y6bgfv1uvy0qeewyttqkm"},"generatedExternalId":"e03y6bgfv1uvy0qeewyttqkm"},"compiledSql":{"sql":"insert into \"logs\" (\"id\", \"message\", \"sessionId\", \"timestamp\", \"counter\", \"status\", \"_internalId\", \"_version\") values (?, ?, ?, ?, ?, ?, null, ?)","params":["e03y6bgfv1uvy0qeewyttqkm","Log 3","rmaan6hwhxnlqi4mcpc5b5nx",1763667697,42,"pending",0],"expectedAffectedRows":null,"expectedReturnedRows":null}}
{"operation":{"type":"find","schema":"[Schema]","table":"[Table:comments]","indexName":"_primary","options":{"useIndex":"_primary","joins":[{"relation":{"id":"comments_posts","on":[["postId","id"]],"name":"post","referencer":{"name":"comments","ormName":"comments","columns":{"id":"[IdColumn]","text":"[Column]","postId":"[Column]","_internalId":"[InternalIdColumn]","_version":"[VersionColumn]"},"relations":{"post":"[Circular]"},"indexes":{"idx_post":{"name":"idx_post","columns":["[Circular]"],"columnNames":["postId"],"unique":false}},"getColumnByName":"[Function]","getIdColumn":"[Function]","getInternalIdColumn":"[Function]","getVersionColumn":"[Function]"},"table":{"name":"posts","ormName":"posts","columns":{"id":"[IdColumn]","title":"[Column]","userId":"[Column]","_internalId":"[InternalIdColumn]","_version":"[VersionColumn]"},"relations":{"author":{"id":"posts_users","on":[["userId","id"]],"name":"author","referencer":"[Circular]","table":{"name":"users","ormName":"users","columns":{"id":"[IdColumn]","name":"[Column]","email":"[Column]","_internalId":"[InternalIdColumn]","_version":"[VersionColumn]"},"relations":{},"indexes":{"idx_name":{"name":"idx_name","columns":["[Circular]"],"columnNames":["name"],"unique":false}},"getColumnByName":"[Function]","getIdColumn":"[Function]","getInternalIdColumn":"[Function]","getVersionColumn":"[Function]"},"type":"one"}},"indexes":{"idx_user":{"name":"idx_user","columns":["[Circular]"],"columnNames":["userId"],"unique":false}},"getColumnByName":"[Function]","getIdColumn":"[Function]","getInternalIdColumn":"[Function]","getVersionColumn":"[Function]"},"type":"one"},"options":{"select":["title"],"join":[{"relation":"[Circular]","options":{"select":["name"]}}]}}]}},"compiledSql":{"sql":"select \"id\", \"text\", \"postId\", \"_internalId\", \"_version\", (select json_array(\"title\", \"_internalId\", \"_version\", (select json_array(\"name\", \"_internalId\", \"_version\") as \"data\" from (select * from \"users\" \"comments_post_author\" where \"comments_post_author\".\"_internalId\" = \"comments_post\".\"userId\" limit ?) \"comments_post_author\")) as \"data\" from (select * from \"posts\" \"comments_post\" where \"comments_post\".\"_internalId\" = \"comments\".\"postId\" limit ?) \"comments_post\") as \"post\" from \"comments\" \"comments\"","params":[1,1]}}
{"operation":{"type":"find","schema":"[Schema]","table":"[Table:comments]","indexName":"_primary","options":{"useIndex":"_primary","joins":[{"relation":{"id":"comments_posts","on":[["postId","id"]],"name":"post","referencer":{"name":"comments","ormName":"comments","columns":{"id":"[IdColumn]","text":"[Column]","postId":"[Column]","_internalId":"[InternalIdColumn]","_version":"[VersionColumn]"},"relations":{"post":"[Circular]"},"indexes":{"idx_post":{"name":"idx_post","columns":["[Circular]"],"columnNames":["postId"],"unique":false}},"getColumnByName":"[Function]","getIdColumn":"[Function]","getInternalIdColumn":"[Function]","getVersionColumn":"[Function]"},"table":{"name":"posts","ormName":"posts","columns":{"id":"[IdColumn]","title":"[Column]","userId":"[Column]","_internalId":"[InternalIdColumn]","_version":"[VersionColumn]"},"relations":{"author":{"id":"posts_users","on":[["userId","id"]],"name":"author","referencer":"[Circular]","table":{"name":"users","ormName":"users","columns":{"id":"[IdColumn]","name":"[Column]","email":"[Column]","_internalId":"[InternalIdColumn]","_version":"[VersionColumn]"},"relations":{},"indexes":{"idx_name":{"name":"idx_name","columns":["[Circular]"],"columnNames":["name"],"unique":false}},"getColumnByName":"[Function]","getIdColumn":"[Function]","getInternalIdColumn":"[Function]","getVersionColumn":"[Function]"},"type":"one"}},"indexes":{"idx_user":{"name":"idx_user","columns":["[Circular]"],"columnNames":["userId"],"unique":false}},"getColumnByName":"[Function]","getIdColumn":"[Function]","getInternalIdColumn":"[Function]","getVersionColumn":"[Function]"},"type":"one"},"options":{"select":["title"],"join":[{"relation":"[Circular]","options":{"select":["name"],"where":{"type":"compare","a":"[Circular]","b":"Alice","operator":"="}}}]}}]}},"compiledSql":{"sql":"select \"id\", \"text\", \"postId\", \"_internalId\", \"_version\", (select json_array(\"title\", \"_internalId\", \"_version\", (select json_array(\"name\", \"_internalId\", \"_version\") as \"data\" from (select * from \"users\" \"comments_post_author\" where (\"comments_post_author\".\"_internalId\" = \"comments_post\".\"userId\" and \"comments_post_author\".\"name\" = ?) limit ?) \"comments_post_author\")) as \"data\" from (select * from \"posts\" \"comments_post\" where \"comments_post\".\"_internalId\" = \"comments\".\"postId\" limit ?) \"comments_post\") as \"post\" from \"comments\" \"comments\"","params":["Alice",1,1]}}
{"operation":{"type":"find","schema":"[Schema]","table":"[Table:comments]","indexName":"_primary","options":{"useIndex":"_primary","pageSize":10,"joins":[{"relation":{"id":"comments_posts","on":[["postId","id"]],"name":"post","referencer":{"name":"comments","ormName":"comments","columns":{"id":"[IdColumn]","text":"[Column]","postId":"[Column]","_internalId":"[InternalIdColumn]","_version":"[VersionColumn]"},"relations":{"post":"[Circular]"},"indexes":{"idx_post":{"name":"idx_post","columns":["[Circular]"],"columnNames":["postId"],"unique":false}},"getColumnByName":"[Function]","getIdColumn":"[Function]","getInternalIdColumn":"[Function]","getVersionColumn":"[Function]"},"table":{"name":"posts","ormName":"posts","columns":{"id":"[IdColumn]","title":"[Column]","userId":"[Column]","_internalId":"[InternalIdColumn]","_version":"[VersionColumn]"},"relations":{"author":{"id":"posts_users","on":[["userId","id"]],"name":"author","referencer":"[Circular]","table":{"name":"users","ormName":"users","columns":{"id":"[IdColumn]","name":"[Column]","email":"[Column]","_internalId":"[InternalIdColumn]","_version":"[VersionColumn]"},"relations":{},"indexes":{"idx_name":{"name":"idx_name","columns":["[Circular]"],"columnNames":["name"],"unique":false}},"getColumnByName":"[Function]","getIdColumn":"[Function]","getInternalIdColumn":"[Function]","getVersionColumn":"[Function]"},"type":"one"}},"indexes":{"idx_user":{"name":"idx_user","columns":["[Circular]"],"columnNames":["userId"],"unique":false}},"getColumnByName":"[Function]","getIdColumn":"[Function]","getInternalIdColumn":"[Function]","getVersionColumn":"[Function]"},"type":"one"},"options":{"select":["title"],"join":[{"relation":"[Circular]","options":{"select":true,"orderBy":[["[Circular]","asc"]],"limit":1}}],"limit":1}}]}},"compiledSql":{"sql":"select \"id\", \"text\", \"postId\", \"_internalId\", \"_version\", (select json_array(\"title\", \"_internalId\", \"_version\", (select json_array(\"id\", \"name\", \"email\", \"_internalId\", \"_version\") as \"data\" from (select * from \"users\" \"comments_post_author\" where \"comments_post_author\".\"_internalId\" = \"comments_post\".\"userId\" order by \"comments_post_author\".\"name\" asc limit ?) \"comments_post_author\")) as \"data\" from (select * from \"posts\" \"comments_post\" where \"comments_post\".\"_internalId\" = \"comments\".\"postId\" limit ?) \"comments_post\") as \"post\" from \"comments\" \"comments\" limit ?","params":[1,1,10]}}
{"operation":{"type":"find","schema":"[Schema]","table":"[Table:posts]","indexName":"_primary","options":{"useIndex":"_primary","joins":[{"relation":{"id":"posts_users","on":[["userId","id"]],"name":"author","referencer":{"name":"posts","ormName":"posts","columns":{"id":"[IdColumn]","title":"[Column]","userId":"[Column]","_internalId":"[InternalIdColumn]","_version":"[VersionColumn]"},"relations":{"author":"[Circular]"},"indexes":{"idx_user":{"name":"idx_user","columns":["[Circular]"],"columnNames":["userId"],"unique":false}},"getColumnByName":"[Function]","getIdColumn":"[Function]","getInternalIdColumn":"[Function]","getVersionColumn":"[Function]"},"table":{"name":"users","ormName":"users","columns":{"id":"[IdColumn]","name":"[Column]","email":"[Column]","_internalId":"[InternalIdColumn]","_version":"[VersionColumn]"},"relations":{},"indexes":{"idx_name":{"name":"idx_name","columns":["[Circular]"],"columnNames":["name"],"unique":false}},"getColumnByName":"[Function]","getIdColumn":"[Function]","getInternalIdColumn":"[Function]","getVersionColumn":"[Function]"},"type":"one"},"options":{"select":["name","email"]}}]}},"compiledSql":{"sql":"select \"id\", \"title\", \"userId\", \"_internalId\", \"_version\", (select json_array(\"name\", \"email\", \"_internalId\", \"_version\") as \"data\" from (select * from \"users\" \"posts_author\" where \"posts_author\".\"_internalId\" = \"posts\".\"userId\" limit ?) \"posts_author\") as \"author\" from \"posts\" \"posts\"","params":[1]}}
{"operation":{"type":"find","schema":"[Schema]","table":"[Table:session]","indexName":"_primary","options":{"useIndex":"_primary","where":"[Function]","joins":[{"relation":{"id":"session_user","on":[["userId","id"]],"name":"sessionOwner","referencer":{"name":"session","ormName":"session","columns":{"id":"[IdColumn]","userId":"[Column]","expiresAt":"[Column]","createdAt":"[Column]","_internalId":"[InternalIdColumn]","_version":"[VersionColumn]"},"relations":{"sessionOwner":"[Circular]"},"indexes":{"idx_session_user":{"name":"idx_session_user","columns":["[Circular]"],"columnNames":["userId"],"unique":false}},"getColumnByName":"[Function]","getIdColumn":"[Function]","getInternalIdColumn":"[Function]","getVersionColumn":"[Function]"},"table":{"name":"user","ormName":"user","columns":{"id":"[IdColumn]","email":"[Column]","passwordHash":"[Column]","createdAt":"[Column]","_internalId":"[InternalIdColumn]","_version":"[VersionColumn]"},"relations":{},"indexes":{"idx_user_email":{"name":"idx_user_email","columns":["[Circular]"],"columnNames":["email"],"unique":false}},"getColumnByName":"[Function]","getIdColumn":"[Function]","getInternalIdColumn":"[Function]","getVersionColumn":"[Function]"},"type":"one"},"options":{"select":["id","email"]}}]}},"compiledSql":{"sql":"select \"id\", \"userId\", \"expiresAt\", \"createdAt\", \"_internalId\", \"_version\", (select json_array(\"id\", \"email\", \"_internalId\", \"_version\") as \"data\" from (select * from \"user\" \"session_sessionOwner\" where \"session_sessionOwner\".\"_internalId\" = \"session\".\"userId\" limit ?) \"session_sessionOwner\") as \"sessionOwner\" from \"session\" \"session\" where \"session\".\"id\" = ?","params":[1,"session123"]}}
{"operation":{"type":"create","schema":"[Schema]","table":"user","values":{"email":"test@example.com","passwordHash":"hashed_password","id":"iggh69xocy0i3rntua9tpe1n"},"generatedExternalId":"iggh69xocy0i3rntua9tpe1n"},"compiledSql":{"sql":"insert into \"user\" (\"id\", \"email\", \"passwordHash\", \"createdAt\", \"_internalId\", \"_version\") values (?, ?, ?, ?, null, ?)","params":["iggh69xocy0i3rntua9tpe1n","test@example.com","hashed_password",1763667697,0],"expectedAffectedRows":null,"expectedReturnedRows":null}}
{"operation":{"type":"create","schema":"[Schema]","table":"session","values":{"userId":{"externalId":"iggh69xocy0i3rntua9tpe1n"},"expiresAt":"2025-12-31T00:00:00.000Z","id":"s842e7pwdz0luyd4iet3tlet"},"generatedExternalId":"s842e7pwdz0luyd4iet3tlet"},"compiledSql":{"sql":"insert into \"session\" (\"id\", \"userId\", \"expiresAt\", \"createdAt\", \"_internalId\", \"_version\") values (?, (select \"_internalId\" from \"user\" where \"id\" = ? limit 1), ?, ?, null, ?)","params":["s842e7pwdz0luyd4iet3tlet","iggh69xocy0i3rntua9tpe1n",1767139200,1763667697,0],"expectedAffectedRows":null,"expectedReturnedRows":null}}
{"operation":{"type":"check","schema":"[Schema]","table":"users","id":{"externalId":"user123"}},"compiledSql":{"sql":"select 1 as \"exists\" from \"users\" where (\"users\".\"id\" = ? and \"users\".\"_version\" = ?) limit ?","params":["user123",5,1],"expectedAffectedRows":null,"expectedReturnedRows":1}}