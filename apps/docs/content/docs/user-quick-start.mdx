---
title: User Quick Start
description: Learn how to integrate Fragno Fragments into your application
icon: Album
---

import { Step, Steps } from "fumadocs-ui/components/steps";
import { Card, Cards } from "fumadocs-ui/components/card";
import { Callout } from "fumadocs-ui/components/callout";

These are usage instructions for integrating a Fragment, `example-fragment`, into a project as a
user.

<Steps>

<Step>
### Installation

Install the fragment you want to use:

```npm
npm i @fragno-dev/example-fragment
```

</Step>

<Step>
### Create a server-side instance of the Fragment
Create a server-side instance of the Fragment in a central location in your codebase:

This is where the Fragment is configured by passing Fragment-specific config fields such as API keys
and callback methods.

```ts title="lib/example-fragment-server.ts"
import { createExampleFragment } from "@fragno-dev/example-fragment";

export function createExampleFragmentInstance() {
  return createExampleFragment({
    // Pass any Fragment-specific config fields
    someApiKey: process.env.EXAMPLE_API_KEY!,
  });
}
```

</Step>

<Step>
### Setup Database (if required)

<Callout title="Optional Step" type="info">
  Only required if the Fragment uses a database layer. Check the Fragment's documentation to see if
  it requires `databaseAdapter`.
</Callout>

If the Fragment requires database integration:

1. Install the database package and the CLI:

   ```npm
   npm install @fragno-dev/db @fragno-dev/cli
   ```

2. Create a database adapter:

   ```ts title="lib/database-adapter.ts"
   import { KyselyAdapter } from "@fragno-dev/db/adapters/kysely";
   import { db } from "./database"; // Your existing Kysely/Drizzle instance

   export const fragmentDbAdapter = new KyselyAdapter({
     db,
     provider: "postgresql", // or "mysql", "sqlite"
   });
   ```

3. Pass the adapter when creating the Fragment:

   ```ts title="lib/example-fragment-server.ts"
   import { createExampleFragment } from "@fragno-dev/example-fragment";
   import { fragmentDbAdapter } from "./database-adapter";

   export function createExampleFragmentInstance() {
     return createExampleFragment(
       {
         someApiKey: process.env.EXAMPLE_API_KEY!,
       },
       {
         databaseAdapter: fragmentDbAdapter,
       },
     );
   }
   ```

4. Run migrations:
   ```bash
   npx fragno-cli db generate lib/example-fragment-server.ts
   npx fragno-cli db migrate lib/example-fragment-server.ts
   ```

For complete instructions, see [Database Fragments](/docs/for-users/database-fragments/overview).

</Step>

<Step>
### Mount the API routes
The API routes defined in the Fragment should be accessible from your frontend. We do this by
creating a "catch-all" API route that will (in this case) forward all requests starting with
`/api/example-fragment` to the Fragment.

Since most frameworks use file-based routing, the location of this file is important.

```ts title="app/api/example-fragment/[...all]/route.ts" tab="Next.js"
import { createExampleFragmentInstance } from "@/lib/example-fragment-server";

const exampleFragment = createExampleFragmentInstance();
export const { GET, POST, PUT, PATCH, DELETE } = exampleFragment.handlersFor("next-js");
```

```ts title="server/api/example-fragment/[...all].ts" tab="Nuxt"
import { createExampleFragmentInstance } from "@/lib/example-fragment-server";

const exampleFragment = createExampleFragmentInstance();
export default fromWebHandler(exampleFragment.handler);
```

```ts title="app/routes/api/example-fragment.tsx" tab="React Router v7"
import type { Route } from "./+types/example-fragment";
import { createExampleFragmentInstance } from "@/lib/example-fragment-server";

export async function loader({ request }: Route.LoaderArgs) {
  return await createExampleFragmentInstance().handler(request);
}

export async function action({ request }: Route.ActionArgs) {
  return await createExampleFragmentInstance().handler(request);
}
```

```ts title="pages/api/example-fragment/[...all].ts" tab="Astro"
import { createExampleFragmentInstance } from "@/lib/example-fragment-server";

const exampleFragment = createExampleFragmentInstance();
export const { ALL } = exampleFragment.handlersFor("astro");
export const prerender = false;
```

```ts title="routes/api/example-fragment/[...path].ts" tab="SvelteKit"
import { createExampleFragmentInstance } from "@/lib/example-fragment-server";

const exampleFragment = createExampleFragmentInstance();
export const { GET, POST, PUT, PATCH, DELETE } = exampleFragment.handlersFor("svelte-kit");
export const prerender = false;
```

```ts title="routes/api/[...example-fragment].ts" tab="SolidStart"
import { exampleFragmentInstance } from "@/lib/example-fragment-server";

// Make sure to initialize the fragment outside of route files
export const { GET, POST, PUT, PATCH, DELETE } = exampleFragmentInstance.handlersFor("solid-start");
```

```ts title="index.ts" tab="Hono"
import { Hono } from "hono";
import { createExampleFragmentInstance } from "@/lib/example-fragment-server";

const app = new Hono();
app.all("/api/example-fragment/*", (c) => createExampleFragmentInstance().handler(c.req.raw));
```

```ts title="index.ts" tab="Express"
import express from "express";
import { createExampleFragmentInstance } from "@/lib/example-fragment-server";

// NOTE: `toNodeHandler` is defined in a separate npm package. Make sure to install it.
import { toNodeHandler } from "@fragno-dev/node";

const app = express();
app.all("/api/my-library/{*any}", toNodeHandler(createExampleFragmentInstance().handler));

// WARNING! If you're using the Express json middleware, make sure that it's mounted AFTER the
// Fragment handler.
app.use(express.json());
```

```ts title="index.ts" tab="Node.js"
import { createServer } from "node:http";
import { createExampleFragmentInstance } from "@/lib/example-fragment-server";
import { toNodeHandler } from "@fragno-dev/node";

const server = createServer((req, res) => {
  const exampleFragment = createExampleFragmentInstance();

  if (req.url?.startsWith(exampleFragment.mountRoute)) {
    const handler = toNodeHandler(exampleFragment.handler);
    return handler(req, res);
  }

  // ... Your route handling
});
```

<Callout type="info" title="Web Standards">
  Fragno uses the web standard `Request` and `Response` objects, so frameworks _not_ listed here
  will integrate in a very similar manner. The `handler` function on a Fragment instance takes a
  request and returns a response.
</Callout>

</Step>

<Step>
### Create a client-side integration

Create the client-side integration in a central location:

<include>../.includes/blog/fragno-introduction/users-frontend.md</include>

<Callout type="warn" title="File Name">
  Make sure the file name does **not** end with `.client.ts`. In some frameworks, this makes it so
  that the file cannot be loaded on the server at all, meaning it cannot be imported during
  server-side rendering.
</Callout>

<Callout type="info" title="Mount Route">
  You're free to mount the backend routes on a different route. In that case it's important to pass
  the `mountRoute` option to the client-side integration.
</Callout>

</Step>

<Step>
### Client-side usage

You can now use the Fragment in any of your components:

```ts title="components/ExampleComponent.tsx" tab="React"
import { exampleFragment } from "@/lib/example-fragment-client";

export default function ExampleComponent() {
  const { data, loading } = exampleFragment.useData();

  return (
    <div>
      <h1>Example Component</h1>
      {loading ? <div>Loading...</div> : <div>{data}</div>}
    </div>
  );
}
```

```vue title="components/ExampleComponent.vue" tab="Vue"
<template>
  <div>
    <div v-if="loading">Loading...</div>
    <div v-else>{{ data }}</div>
  </div>
</template>

<script setup lang="ts">
import { exampleFragment } from "@/lib/example-fragment-client";

const { data, loading } = exampleFragment.useData();
</script>
```

```ts title="components/ExampleComponent.tsx" tab="SolidJS"
import { exampleFragment } from "@/lib/example-fragment-client";
import { Show } from "solid-js";

export default function ExampleComponent() {
  const { data, loading } = exampleFragment.useData();
  return (
    <div>
      <Show when={loading()}>
        <div>Loading...</div>
      </Show>

      <Show when={data()}>
        <div>{data()}</div>
      </Show>
    </div>
  );
}
```

```ts title="main.ts" tab="Vanilla JavaScript"
import { exampleFragment } from "@/lib/example-fragment-client";

exampleFragment.useData().subscribe(({ data, loading }) => {
  const dataDisplay = document.getElementById("data-display")!;
  dataDisplay.textContent = loading ? "loading..." : data;
});
```

</Step>

</Steps>
