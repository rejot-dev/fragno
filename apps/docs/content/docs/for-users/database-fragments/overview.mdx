---
title: Overview
description: Getting started with database-enabled Fragments
---

import { Callout } from "fumadocs-ui/components/callout";
import { Step, Steps } from "fumadocs-ui/components/steps";

Some Fragno Fragments include a built-in database layer for persistent storage. When integrating
these Fragments, you need to provide a **database adapter** that connects the Fragment to your
existing database.

<Callout title="Fragment Handles Schema" type="info">
  The Fragment defines its own schema and handles migrations. You just provide the database
  connection - no need to manually create tables or write SQL.
</Callout>

## Identifying Database Fragments

A Fragment uses the database layer if its documentation mentions `FragnoPublicConfigWithDatabase` or
requires a `databaseAdapter` option.

Check the Fragment's creation function:

```typescript
// Fragment without database
createExampleFragment(config, options);

// Fragment with database - requires databaseAdapter
createCommentFragment(config, { databaseAdapter });
```

## Quick Start

<Steps>

<Step>
### Installation

```npm
npm install @fragno-dev/db
```

And install the CLI to perform migrations / schema generation:

```npm
npm install --save-dev @fragno-dev/cli
```

</Step>

<Step>
### Choose Your Adapter

Fragno supports two popular TypeScript ORMs:

- **[Kysely](/docs/for-users/database-fragments/kysely)** - Type-safe SQL query builder
- **[Drizzle](/docs/for-users/database-fragments/drizzle)** - Modern TypeScript ORM

Choose the adapter that matches your existing database setup. If you're starting fresh, either works
great.

<Callout title="Prisma Support" type="warn">
  We might support Prisma in the future. Follow [this
  issue](https://github.com/rejot-dev/fragno/issues/64) to get updates, and let us know if you'd
  like to see it supported.
</Callout>

</Step>

<Step>
### Create Database Adapter

See the adapter-specific pages for detailed setup:

- [Kysely Integration Guide](/docs/for-users/database-fragments/kysely)
- [Drizzle Integration Guide](/docs/for-users/database-fragments/drizzle)

It will look something like this:

```typescript title="lib/database-adapter.ts"
import { DrizzleAdapter } from "@fragno-dev/db/adapters/drizzle";
import { db } from "./database"; // Your existing Drizzle instance

export const fragmentDbAdapter = new DrizzleAdapter({
  db,
  provider: "postgresql", // or "mysql", "sqlite"
});
```

</Step>

<Step>
### Pass Adapter to Fragment

```typescript title="lib/comment-fragment-server.ts"
import { createCommentFragment } from "@fragno-dev/comment-fragment";
import { fragmentDbAdapter } from "./database-adapter";

export function createCommentFragmentInstance() {
  return createCommentFragment(
    {
      // Fragment-specific config
    },
    {
      databaseAdapter: fragmentDbAdapter,
    },
  );
}

// IMPORTANT: Export the Fragment so it's accessible by the Fragno CLI.
export const fragment = createCommentFragmentInstance();
```

</Step>

<Step>
### Migrate your Database

Generate and apply database migrations:

```npm
# Generate migration (or schema) file
npx fragno-cli db generate lib/comment-fragment-server.ts

# Or apply migrations directly
npx fragno-cli db migrate lib/comment-fragment-server.ts
```

For details on the CLI commands, see the [CLI Reference](/docs/reference/cli).

</Step>

</Steps>

## Supported Databases

Both Kysely and Drizzle adapters support:

- **PostgreSQL**
- **MySQL**
- **SQLite**

The adapter automatically handles database-specific SQL generation.

## FAQ

**Q: Do I need to learn a new ORM?**

A: No. You continue using your existing Kysely or Drizzle setup. The Fragment just adds its tables
to your database.

**Q: Can I query Fragment tables directly?**

A: Yes, but there are some caveats. In general we recommend using the Fragment's service methods
instead. You can query the Fragment's tables directly, but you have to be aware of the fact that the
Fragment author may change the schema in the future.

**Q: What if I don't use Kysely or Drizzle?**

A: Currently, only Kysely and Drizzle adapters are available. Support for other ORMs may be added in
the future. Please let us know on [GitHub](https://github.com/rejot-dev/fragno/discussions) if you'd
like to see support for other ORMs.

**Q: Can I use multiple database Fragments?**

A: Yes! Each Fragment manages its own namespaced tables. You can use the same adapter for all
Fragments:

```typescript
const comments = createCommentFragment({}, { databaseAdapter });
const ratings = createRatingFragment({}, { databaseAdapter });
```

## Next Steps

Choose your database adapter to continue:

- [Kysely Integration Guide](/docs/for-users/database-fragments/kysely)
- [Drizzle Integration Guide](/docs/for-users/database-fragments/drizzle)
- [CLI Reference](/docs/reference/cli) for migration commands
